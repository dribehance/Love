angular.module("Love",["ngRoute","LocalStorageModule","flow"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,t,o,r,n){angular.forEach(n.interceptor,function(t){var o=t.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});o+="Controller",e.when("/"+t,{templateUrl:"templates/"+t+".html",reloadOnSearch:!1,controller:o,resolve:{user:["$q","$location","localStorageService",function(e,o,r){var n=[],i=e.defer();return n.includes(t)&&!r.get("token")?(i.reject(),o.path("/signin").replace(),void 0):(i.resolve(),i.promise)}]}})}),e.otherwise("/ta"),t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,delete t.defaults.headers.common["X-Requested-With"],r.setStorageCookie(.02),t.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Love").factory("weixinServices",["$http","$route","$timeout","$rootScope","$location","toastServices","$window","localStorageService","config",function(e,t,o,r,n,i,s,a,u){function c(e,t,o,r){wx.onMenuShareTimeline({title:e||u.share.title,link:t||u.share.link,imgUrl:o||u.share.thumbnail,trigger:function(){},success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e||u.share.title,desc:r||u.share.desc,link:t||u.share.link,imgUrl:o||u.share.thumbnail,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e||u.share.title,desc:r||u.share.desc,link:t||u.share.link,imgUrl:o||u.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e||u.share.title,desc:r||u.share.desc,link:t||u.share.link,imgUrl:o||u.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e||u.share.title,desc:r||u.share.desc,link:t||u.share.link,imgUrl:o||u.share.thumbnail,success:function(){},cancel:function(){}})}{var p=n.absUrl().split("#")[0];e({url:u.url+"/app/WeixinCommon/getSignature",method:"GET",params:angular.extend({},u.common_params,{current_url:p})}).then(function(e){var t=e.data;t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS&&wx.config({debug:!1,appId:u.weixin.appid,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","chooseWXPay"]})})}return wx.ready(function(){c()}),wx.error(function(){}),{initWeixinShareEvent:function(e,t,o,r){c(e,t,o,r)},login:function(){var e=u.weixin.base_url+"?appid="+u.weixin.appid+"&redirect_uri="+encodeURIComponent(u.weixin.redirect_uri)+"&response_type="+u.weixin.response_type+"&scope="+u.weixin.scope+"&state="+u.weixin.state+u.weixin.wechat_redirect;s.location.href=e},prepare_pay:function(e){var t=u.weixin.base_url+"?appid="+u.weixin.appid+"&redirect_uri="+encodeURIComponent(e.redirect_uri)+"&response_type="+u.weixin.response_type+"&scope="+u.weixin.silence_scope+"&state="+JSON.stringify(e)+u.weixin.wechat_redirect;s.location.href=t},pay:function(e){i.show(),wx.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,"package":e.package_web,signType:e.signType,paySign:e.paySign,success:function(){i.hide(),o(function(){n.path("ta").replace()},1e3)},cancel:function(){i.hide(),o(function(){n.path("ta").replace()},1e3)},fail:function(){i.hide(),o(function(){n.path("ta").replace()},1e3)}})}}}]),angular.module("Love").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,o,r,n){return{rsa_key:o._get(angular.extend({},n.common_params,{url:"key/private_key.pem"})),signin:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/Login"})),signup:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/RegistTel"})),forget:o._get(angular.extend({},n.common_params,{url:n.url+"/api_url"})),reset:o._get(angular.extend({},n.common_params,{url:n.url+"/api_url"})),get_smscode:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/getRegisterCode"})),query_basicinfo:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/baseInfo",token:r.get("token")})),query_userinfo:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/userInfo",token:r.get("token")})),save_userinfo_1:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserModifyManage/updateInfo01",token:r.get("token")})),save_userinfo_2:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserModifyManage/updateInfo02",token:r.get("token")})),save_userinfo_3:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateChooseMate",token:r.get("token")})),update_cover:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateBgImg",token:r.get("token")})),remove_cover:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/deteleBgImg",token:r.get("token")})),realname_authen:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateRealNameAuth",token:r.get("token")})),phone_authen:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateTelephoneAuth",token:r.get("token")})),like:o._get(angular.extend({},n.common_params,{url:n.url+"/app/Home/addLove",token:r.get("token")})),unlike:o._get(angular.extend({},n.common_params,{url:n.url+"/app/Home/deleteLove",token:r.get("token")})),prepare_yue_ta:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/isChat",token:r.get("token")})),yue_ta:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/addTryst",token:r.get("token")})),query_messages:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/collectMsgList",token:r.get("token")})),query_send_messages:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/sendOutList",token:r.get("token")})),clear_message:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/clearChats",token:r.get("token")})),query_message_by_id:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/chatMessageList",token:r.get("token")})),send:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/sendContent",token:r.get("token")})),block:o._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/setShield",token:r.get("token")})),charge:o._get(angular.extend({},n.common_params,{url:n.url+"/app/Pays/payVip",token:r.get("token")})),withdraw:o._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/userWithDraw",token:r.get("token")})),query_visitors:o._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")})),query_lovers:o._get(angular.extend({},n.common_params,{url:n.url+"/app/LoveManage/loveEachOtherList",token:r.get("token")})),query_meetting:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/trystMeList",token:r.get("token")})),query_report_info:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/constant",token:r.get("token")})),report:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/complaintTryst",token:r.get("token")})),agree_meetting:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/agreeTryst",token:r.get("token")})),reject_meetting:o._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/refuseTryst",token:r.get("token")}))}}]),angular.module("Love").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,t,o,r,n){return{request:function(e){return e},requestError:function(){},response:function(r){var i=t.defer();return r.config.url.indexOf(".html")>0?r:r.data.code==n.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),o.remove("token"),e.path("/signin").replace(),i.promise):r},responseError:function(e){var o=t.defer();return r.requestError(e.data,e.status,e.headers,e.config),o.promise}}}]),angular.module("Love").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Love").factory("loveServices",["$http","apiServices","localStorageService","config",function(e,t,o,r){return{query_loves:t._get(angular.extend({},r.common_params,{url:r.url+"/app/Home/taList"})),query_love_by_id:t._get(angular.extend({},r.common_params,{url:r.url+"/api_url"})),query_province:t._get(angular.extend({},r.common_params,{url:"city/province.json"})),query_city:t._get(angular.extend({},r.common_params,{url:"city/city.json"})),query_tags:t._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/interestTalentInfo"})),query_tags:t._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/interestTalentInfo"})),query_vips:t._get(angular.extend({},r.common_params,{url:r.url+"/app/Pays/vipPrices"}))}}]),angular.module("Love").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,t,o){return{show:function(t){e.error_msg=t,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(o){e.error_msg=o,$(".error-msg").show(),t(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(e,t,r,n){switch(o.hide(),t){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(t),console.log(e),console.log(r),console.log(n),console.log("onRequestError end")}}}]),angular.module("Love").directive("errSrc",function(){return{restrict:"A",link:function(e,t,o){$(t).bind("error",function(){$(t).attr("src",o.errSrc)})}}}),angular.module("Love").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","config",function(e,t,o,r,n,i){var s=function(){},a=function(e,t,o){n.hide(),r.hide(),c(e,t,o)},u=function(){},c=function(){};return{init:function(){e.$on("$routeChangeStart",s),e.$on("$routeChangeSuccess",a),e.$on("$routeChangeError",u),e.go=function(e){o.path(e)},e.back=function(){t.history.back()},e.staticImageUrl=i.imageUrl}}}]),angular.module("Love").factory("apiServices",["$http","localStorageService",function(e,t){return{_get:function(o){return function(r){return void 0!==o.token&&(o.token=t.get("token")),e({url:o.url,method:"GET",params:angular.extend({},o,r)}).then(function(e){return e.data})}},_post:function(o){return function(r){return void 0!==o.token&&(o.token=t.get("token")),e({url:o.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},data:angular.extend({},o,r)}).then(function(e){return e.data})}}}}]),angular.module("Love").directive("uploader",["$timeout",function(e){return{link:function(t,o){function r(e){var t=$(e.target),o=t.width(),r=t.height(),i=parseFloat(o)/parseFloat(r);n>i?t.css({display:"inline-block",height:"auto",width:"100%"}):t.css({display:"inline-block",height:"100%",width:"auto"}),t.parent().css({background:"none"}),t.css({visibility:"visible"})}var n=parseFloat(t.$eval($(o).parent().attr("data-rate")));$(o).css({visibility:"hidden"});var i="../images/default.png",s=$(window).width(),a=$(o).parent().width()||s,u=a/n,c={display:"block",width:a,overflow:"hidden","text-align":"center","background-image":"url("+i+")","background-position":"center center","background-repeat":"no-repeat",height:u};$(o).parent().css(c),o.bind("load",function(t){r(t),e(function(){r(t)},100)})}}}]),angular.module("Love").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,t){e.$last&&e.$emit("onRepeatDone",t)}}}),angular.module("Love").directive("mobilepicker",["$timeout",function(e){return{restrict:"E",scope:{options:"="},template:"<input type='text' name='picker' readonly ng-model='options.value'>",link:function(t,o){var r={beginyear:1950,endyear:(new Date).getFullYear(),days:["周日","周一","周二","周三","周四","周五","周六"],curdate:!1,theme:"date",event:"click",callBack:function(e){t.options.value=e.y+"-"+e.M+"-"+e.d}};e(function(){$(o).find("input").datePicker(angular.extend({},r,t.options))},0)}}}]),angular.module("Love").directive("imageview",["$timeout",function(e){return{restrict:"E",scope:{src:"="},controller:["$scope","$element","$attrs",function(t,o,r){function n(e){$(e.target).css({width:"auto",height:"auto"});var o=$(e.target),r=o.width(),n=o.height(),i=parseFloat(r)/parseFloat(n);i<t.rate?(r=t.width,n=t.width/i,o.css({display:"inline-block",height:n,width:r,"margin-top":-(n-t.height)/2})):(n=t.height,r=n*i,o.css({display:"inline-block",height:n,width:r,"margin-left":-(r-t.width)/2})),o.parent().css({background:"none"}),o.css({visibility:"visible"})}function i(e){var o=$(e.target),r=o.width(),n=o.height(),i=parseFloat(r)/parseFloat(n);i<t.rate?o.css({display:"inline-block",height:"auto",width:"100%"}):o.css({display:"inline-block",height:"100%",width:"auto"}),o.parent().css({background:"none"}),o.css({visibility:"visible"})}return t.bg_image="../images/default.png",t.rate=parseFloat(r.rate),t.width=o.width()||$(window).width(),t.height=t.width/t.rate,t.rate?(this.show_center_on_loaded=function(t){n(t),e(function(){n(t)},100)},this.show_on_loaded=function(t){i(t),e(function(){i(t)},100)},void 0):(console.log("unexpect rate"),void 0)}],template:function(e){var t="<img ng-src='{{src}}' show-center-on-loaded err-src='../images/banner.png'>";return void 0==$(e).attr("center-only")&&(t="<img ng-src='{{src}}' show-on-loaded err-src='../images/banner.png'>"),t},link:function(e,t){var o={display:"block",width:e.width,overflow:"hidden","text-align":"center","background-image":"url("+e.bg_image+")","background-position":"center center","background-repeat":"no-repeat",height:e.height};$(t).css(o),$(t).parent().css({overflow:"hidden"})}}}]).directive("showOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,o,r){t.bind("load",r.show_on_loaded)}}}).directive("showCenterOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,o,r){t.bind("load",r.show_center_on_loaded)}}}),angular.module("Love").directive("dribehanceHeader",function(){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(){}}}),angular.module("Love").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Love").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(t,o){function r(){var o=t.countdown.message,r=parseFloat(t.countdown.count)?parseFloat(t.countdown.count):60;n=!0,t.$apply(function(){t.countdown.message=r--,t.countdown.message=r+"s重新获取",t.countdown.mode="disabled",t.countdown.reset=!1,t.countdown.callback()});var i=e(function(){t.countdown.message=r--,t.countdown.message=r+"s重新获取",(0>r||t.countdown.reset)&&(e.cancel(i),t.countdown.message=o,n=!1)},1e3)}var n=!1;$(o).bind("click",function(){t.disabled||n||r()})}}}]),angular.module("Love").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,t){var o={autoplay:!0,items:1};o=angular.extend({},o,e.$eval($(t).attr("data-options")));var r=parseFloat(e.$eval($(t).attr("data-rate"))),n={display:"block",width:$(t).parent().width()||$(window).width(),height:($(t).parent().width()||$(window).width())/r};$(t).css(n),e.$on("onRepeatDone",function(){$(t).find(".carousel-holder").owlCarousel(o)})}}}),angular.module("Love").controller("withdrawalsController",["$scope","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a){e.input={},e.ajaxForm=function(){i.show(),r.withdraw({draw_money:e.input.draw_money}).then(function(e){i.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?(n.autoHide(e.message),o(function(){t.back()},2e3)):n.autoHide(e.message)})},i.show(),r.query_basicinfo().then(function(t){i.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?e.user=t.Result.BaseInfo:n.autoHide(t.message)})}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("tagsController",["$scope","$rootScope","$routeParams","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c){e.select=function(e){e.select=!e.select},o.type||t.back(),a.show(),i.query_tags({type:o.type}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.tags=t.Result.InterestTalentInfos,e.tags.map(function(e){return e.name=e.field_name,e.select=!1,e})):s.autoHide(t.message)}),e.save=function(){var i={},u=e.tags.filter(function(e){return e.select}).map(function(e){return e.name}).join("#");"1"==o.type&&(i.taste=u),"2"==o.type&&(i.talent_skill=u),a.show(),n.save_userinfo_1(i).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(s.autoHide(e.message),r(function(){t.back()},2e3)):s.autoHide(e.message)})}}]),angular.module("Love").controller("taController",["$scope","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",t.query_loves(e.page).then(function(t){r.hide(),e.page.message="点击加载更多",t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.loves=e.loves.concat(t.Result.Users.list),e.no_more=e.loves.length==t.Result.Users.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore(),e.get_tag=function(e){return""==e?[]:e.split("#")}}]),angular.module("Love").controller("singleController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("signupController",["$scope","$rootScope","$routeParams","$location","$timeout","$location","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,r,i,s,a,u,c,p){e.step=1,e.input={},e.show_step=function(t){e.step=t},e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.countdown={message:"获取验证码"},e.countdown.callback=function(){u.show(),i.get_smscode({telephone:e.input.telephone}).then(function(t){u.hide(),t.code==p.request.SUCCESS&&t.status==p.response.SUCCESS?a.autoHide(t.message):(e.countdown.reset=!0,a.autoHide(t.message))})},e.$on("upload_success",function(t,o){e.input.filename=o.message}),e.input.gender=1,e.select_gender=function(t){e.input.gender=t},s.query_province().then(function(t){e.provinces=t.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(t){void 0!==t&&e.query_city(t)}),e.query_city=function(t){s.query_city().then(function(o){e.cities=o[t],e.input.city=e.cities[0]})};for(var l=18,_=[],g=0;83>g;g++)_.push(l+"岁"),l++;e.ages=_,e.input.age=e.ages[0];for(var d=100,h=[],g=0;150>g;g++)h.push(d+"cm"),d++;e.heights=h,e.input.height=e.heights[0],e.degrees=["初中","高中","中专","大专","本科","硕士","博士"],e.input.degree=e.degrees[0],e.marrys=["未婚","已婚","离异","丧偶"],e.input.marry=e.marrys[0],e.incomes=["5000元以下","5000-10000元","10000-20000元","20000-30000元","30000以上"],e.input.income="5000元以下",e.ajaxForm=function(){u.show(),i.rsa_key().then(function(t){var o=new JSEncrypt,r=t;o.setPrivateKey(r);var n=o.encrypt(e.input.password);e.input.password=n}).then(function(){i.signup({fileName:e.input.filename,telephone:e.input.telephone,password:e.input.password,tel_code:e.input.sms_code,sex:e.input.gender,nickname:e.input.nickname,province:e.input.province,city:e.input.city,height:e.input.height,edu:e.input.degree,marry:e.input.marry,income:e.input.income,recommend_code:e.input.referee,uid:o.uid}).then(function(t){u.hide(),t.code==p.request.SUCCESS&&t.status==p.response.SUCCESS?(a.autoHide(t.message),e.input.password="",c.set("token",t.token),n(function(){r.path("ta").search("uid",null).replace()},2e3)):a.autoHide(t.message)})})}}]),angular.module("Love").controller("uploadController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){var s,a;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return a=e,e}),s=(new Date).getTime()+a,t.opts.target=i.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",filename:s},r.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_success",{message:s}),r.hide()})}]),angular.module("Love").controller("signinController",["$scope","$routeParams","$timeout","$location","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c){e.uid=t.uid,e.input={telephone:"",password:""},e.clear=function(){e.input.password=""},e.ajaxForm=function(){a.show(),i.rsa_key().then(function(t){var o=new JSEncrypt,r=t;o.setPrivateKey(r);var n=o.encrypt(e.input.password);e.input.password=n}).then(function(){i.signin({telephone:e.input.telephone,password:e.input.password,uid:t.uid}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(s.autoHide(t.message),e.input.password="",u.set("token",t.token),o(function(){r.path("ta").search("uid",null).replace()},2e3)):(e.input.password="",s.autoHide(t.message))})})},e.weixinLogin=function(){n.login()}}]),angular.module("Love").controller("showController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u){e.input={},s.show(),n.query_userinfo().then(function(t){s.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?e.input.user_show=t.Result.UserInfo.heart:i.autoHide(t.message)}),e.ajaxForm=function(){s.show(),n.save_userinfo_1({heart:e.input.user_show}).then(function(e){s.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?o(function(){t.back()},2e3):i.autoHide(e.message)})}}]),angular.module("Love").controller("servicesController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(t){e.step=t}}]),angular.module("Love").controller("sendMessagesController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){e.messages=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",t.query_send_messages(e.page).then(function(t){r.hide(),e.page.message="点击加载更多",t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.messages=e.messages.concat(t.Result.ChatUsers.list),e.no_more=e.messages.length==t.Result.ChatUsers.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.messages.length+"条记录"),e.page.pn++}))},e.loadMore()}]),angular.module("Love").controller("searchController",["$scope","$routeParams","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s){e.loves=[],e.page={pn:1,page_size:5,intelligent_type:"1",message:"点击加载更多",heights:t.heights,ages:t.ages,incomes:t.incomes,edus:t.edus,merrys:t.merrys,ages_start:t.age_from,ages_end:t.age_to,height_start:t.height_from,height_end:t.height_from},e.get_tag=function(e){return""==e?[]:e.split("#")},e.loadMore=function(){e.no_more||(n.show(),e.page.message="正在加载...",o.query_loves(e.page).then(function(t){n.hide(),e.page.message="点击加载更多",t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?(e.loves=e.loves.concat(t.Result.Users.list),e.no_more=e.loves.length==t.Result.Users.totalRow?!0:!1):r.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore(),e.smart_search=function(){e.loves=[],e.page.intelligent_type="1"==e.page.intelligent_type?"2":"1";var o=e.page.intelligent_type;e.page={pn:1,page_size:5,intelligent_type:o,message:"点击加载更多",heights:t.heights,ages:t.ages,incomes:t.incomes,edus:t.edus,merrys:t.merrys,height_intelligent:"",ages_start:t.age_from,ages_end:t.age_to,height_start:t.height_from,height_end:t.height_from},e.no_more=!1,e.loadMore()}}]),angular.module("Love").controller("searchConditionalController",["$scope","$rootScope","$location","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){e.input={},i.query_province().then(function(t){e.provinces=t.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(t){void 0!==t&&e.query_city(t)}),e.query_city=function(t){i.query_city().then(function(o){e.cities=o[t],e.input.city=e.cities[0]})};for(var s=18,a=[],u=0;83>u;u++)a.push(s+"岁"),s++;e.ages=a,e.input.age=e.ages[0];for(var c=100,p=[],u=0;150>u;u++)p.push(c+"cm"),c++;e.heights=p,e.degrees=["初中","高中","中专","大专","本科","硕士","博士"],e.input.degree=e.degrees[0],e.marrys=["未婚","已婚","离异","丧偶"],e.input.marry=e.marrys[0],e.incomes=["5000元以下","5000-10000元","10000-20000元","20000-30000元","30000以上"],e.input.income="5000元以下",e.search=function(){o.path("search").search({heights:e.input.height,ages:e.input.age,incomes:e.input.income,marrys:e.input.marry,edus:e.input.degree,kw:e.input.user_id,province:e.input.province,city:e.input.city,age_from:e.input.age_from,age_to:e.input.age_to,height_from:e.input.height_from,height_to:e.input.height_to}).replace()}}]),angular.module("Love").controller("recommendationController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("realnameAuthenController",["$scope","$rootScope","userServices","$timeout","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a){e.input={},e.ajaxForm=function(){i.show(),o.realname_authen({realname:e.input.realname,ID_num:e.input.id,ID_front_image:e.input.front,ID_back_image:e.input.back}).then(function(e){i.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?(n.autoHide(e.message),$timout(function(){t.back()},2e3)):n.autoHide(e.message)})},e.$on("upload_front_success",function(t,o){e.input.front=o.message}),e.$on("upload_back_success",function(t,o){e.input.back=o.message})}]),angular.module("Love").controller("uploadFrontController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_front_success",{message:i}),o.hide()})}]),angular.module("Love").controller("uploadBackController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_back_success",{message:i}),o.hide()})}]),angular.module("Love").controller("privacyController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("phoneAuthenController",["$scope","$timeout","$rootScope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a){e.input={},e.ajaxForm=function(){i.show(),r.phone_authen({telephone:e.input.telephone,tel_code:e.input.smscode}).then(function(e){i.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?(n.autoHide(e.message),t(function(){o.back()},2e3)):n.autoHide(e.message)})},e.countdown={message:"获取验证码"},e.countdown.callback=function(){i.show(),r.get_smscode({telephone:e.input.telephone}).then(function(t){i.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?n.autoHide(t.message):(e.countdown.reset=!0,n.autoHide(t.message))})},e.modal={status:0},e.open_modal=function(){e.modal.status=3},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("paymentController",["$scope","$rootScope","$routeParams","$location","$timeout","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c,p){e.input={money:o.money,pay_type:"2",type:o.type||""},e.active=function(t){e.input.pay_type=t},e.pay=function(){var t={pay_type:e.input.pay_type,vip_price_id:o.id,trysted_user_id:o.id};return c.get("token")?("vip"==o.type&&e.purchurse_vip(t),"charge"==o.type&&e.charge(t),"meeting"==o.type&&"1"==e.input.pay_type&&e.yue_by_balance(t),"meeting"==o.type&&"2"==e.input.pay_type&&e.yue_by_weixin(t),void 0):(r.path("signin").replace(),void 0)},e.purchurse_vip=function(){i.prepare_pay({redirect_uri:p.url+"/app/WeixinPayController/comfiyPayVip",token:c.get("token"),vip_price_id:o.id})},e.charge=function(){i.prepare_pay({redirect_uri:p.url+"/app/WeixinPayController/chargeDeposit",token:c.get("token"),vip_price_id:o.id})},e.yue_by_weixin=function(){i.prepare_pay({redirect_uri:p.url+"/app/WeixinPayController/payAddTryst",token:c.get("token"),trysted_user_id:o.id})},e.yue_by_balance=function(e){u.show(),s.yue_ta(e).then(function(e){u.hide(),e.code==p.request.SUCCESS&&e.status==p.response.SUCCESS?(a.autoHide(e.message),n(function(){r.path("ta").replace()},2e3)):a.autoHide(e.message)})}}]),angular.module("Love").controller("oauthController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("myloveController",["$scope","$location","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a){e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多",love_type:o.type},e.loadMore=function(){e.no_more||(i.show(),e.page.message="正在加载...",r.query_lovers(e.page).then(function(t){i.hide(),e.page.message="点击加载更多",t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?(e.loves=e.loves.concat(t.Result.LoveEachOthers.list),e.no_more=e.loves.length==t.Result.LoveEachOthers.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore(),e.local_go=function(e,o){o.preventDefault(),o.stopPropagation(),t.path("detail").search({id:e.loved_user_id})},e.unlike=function(e,t){t.preventDefault(),t.stopPropagation(),i.show(),r.unlike({id:e.loved_user_id}).then(function(e){i.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?n.autoHide(e.message):n.autoHide(e.message)})}}]),angular.module("Love").controller("messagesController",["$scope","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s){e.news=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(n.show(),e.page.message="正在加载...",o.query_messages(e.page).then(function(t){n.hide(),e.page.message="点击加载更多",t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?(e.news=e.news.concat(t.Result.CollectUsers.list),e.no_more=e.news.length==t.Result.CollectUsers.totalRow?!0:!1):r.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.news.length+"条记录"),e.page.pn++
}))},e.loadMore(),o.query_basicinfo().then(function(t){t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?e.user=t.Result.BaseInfo:r.autoHide(t.message)}),e.modal={},e.go=function(o){"1"==e.user.is_vip?t.path("chat").search({id:o.user_id,status:o.chat_status}):e.modal.status=1},e.confirm_modal=function(){t.path("charge").search({})},e.cancel_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("messageController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("memberController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("meController",["$scope","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0},n.show(),o.query_basicinfo().then(function(t){n.hide(),t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?e.user=t.Result.BaseInfo:r.autoHide(t.message)}),e.preview_image=function(t){e.preview_images=t,e.preview="preview"},e.close_preview=function(){e.preview=""},e.get_images=function(e){return e?e.split("#"):[]}}]),angular.module("Love").controller("matingController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("manualAuthenController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){r.show(),t.query_report_info().then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.report_info=t.Result.Constant:o.autoHide(t.message)})}]),angular.module("Love").controller("loversController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("indexController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("expressController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("editBasicController",["$scope","$route","$filter","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c){e.input={},e.input.options={},a.show(),n.query_userinfo({type:"1"}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.user=t.Result.UserInfo,e.user.birthday?(e.input.birthday=e.user.birthday,e.input.options.value=e.user.birthday):(e.input.birthday=o("date")(new Date,"yyyy-MM-dd"),e.input.options.value=e.input.birthday),e.input.covers=e.user.image_other.split("#").filter(function(e){return""!=e}),e.input.avatar=e.user.image_01,e.input.heart=e.user.heart,e.input.nickname=e.user.nickname,e.input.gender=e.genders[e.user.sex],e.input.height=e.user.height,e.input.income=e.user.income,e.input.province=e.user.province,r(function(){e.input.city=e.user.city,e.input.city_1=e.user.UserOther.choose_mate_city,e.input.city_2=e.user.UserOther.dossier_hometown_city},2e3),e.input.degree=e.user.edu,e.input.marry=e.user.marry,e.input.child=e.user.is_has_child,e.input.is_buy_house=e.user.is_buy_house,e.input.house=e.user.buy_house,e.input.car=e.user.buy_car,e.input.is_buy_car=e.user.is_buy_car,e.input.job=e.user.job,e.input.age_1=e.user.UserOther.choose_mate_age,e.input.age_from=e.user.UserOther.choose_mate_start_age,e.input.age_to=e.user.UserOther.choose_mate_end_age,e.input.height_1=e.user.UserOther.choose_mate_heart,e.input.height_from=e.user.UserOther.choose_mate_start_height,e.input.height_to=e.user.UserOther.choose_mate_end_height,e.input.income_1=e.user.UserOther.choose_mate_income,e.input.province_1=e.user.UserOther.choose_mate_province,e.input.degree_1=e.user.UserOther.choose_mate_edu,e.input.marry_1=e.user.UserOther.choose_mate_marry,e.input.child_1=e.user.UserOther.choose_mate_has_child,e.input.house_1=e.user.UserOther.choose_mate_has_house,e.input.car_1=e.user.UserOther.choose_mate_has_car,e.input.province_2=e.user.UserOther.dossier_hometown_province,e.input.nation=e.user.UserOther.dossier_nation,e.input.shuxiang=e.user.UserOther.dossier_shuxiang,e.input.xinzuo=e.user.UserOther.dossier_xingzuo,e.input.blood=e.user.UserOther.dossier_xuexing,e.input.body=e.user.UserOther.dossier_tixing,e.input.weight=e.user.UserOther.dossier_tizhong,e.input.score=e.user.UserOther.dossier_xiangmao_zp,e.input.region=e.user.UserOther.dossier_xiangmao_religion,e.input.smoke=e.user.UserOther.dossier_smoke,e.input.drink=e.user.UserOther.dossier_drink,e.input.school=e.user.UserOther.edu_job_school,e.input.major=e.user.UserOther.edu_job_profession,e.input.position=e.user.UserOther.edu_job_zhiye_zhiwu,e.input.company_nature=e.user.UserOther.edu_job_nature_company,e.input.industry=e.user.UserOther.edu_job_company_hangye,e.input.work_status=e.user.UserOther.edu_job_work_status,e.input.language=e.user.UserOther.edu_job_master_language,e.input.about_money=e.user.UserOther.attitude_money,e.input.about_love=e.user.UserOther.attitude_shiye_love,e.input.about_sex=e.user.UserOther.attitude_sex,e.input.marry_plan=e.user.UserOther.love_marry_plan,e.input.housework=e.user.UserOther.love_home_work,e.input.baby=e.user.UserOther.love_want_child,e.input.live_with_parent=e.user.UserOther.love_want_fw_zhu,e.input.couple=e.user.UserOther.love_spouse_pattern,e.input.alone_with=e.user.UserOther.love_live_pattern,e.input.yearing=e.user.UserOther.life_xiangwang_thing,e.input.like_book=e.user.UserOther.life_love_book,e.input.like_film=e.user.UserOther.life_love_movie,e.input.like_music=e.user.UserOther.life_love_music,e.input.focus_topic=e.user.UserOther.life_guanzhu_theme,e.input.proud=e.user.UserOther.life_proud_thing,e.input.cooking=e.user.UserOther.life_cooking,e.input.had_been=e.user.UserOther.life_go_space,e.input.work_place=e.user.UserOther.life_circle_work_place,e.input.life_place=e.user.UserOther.life_circle_life_place):s.autoHide(t.message)}),e.input.covers=[],e.$on("upload_cover_success",function(t,o){a.show(),n.update_cover({image_index:"2",fileName:o.message}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.input.covers.push(o.message):s.autoHide(t.message)})}),e.remove_cover=function(t,o){o.preventDefault(),o.stopPropagation(),a.show(),n.remove_cover({oleFileName:t}).then(function(o){a.hide(),o.code==c.request.SUCCESS&&o.status==c.response.SUCCESS?e.input.covers=e.input.covers.filter(function(e){return t!=e}):s.autoHide(o.message)})},e.$on("upload_avatar_success",function(t,o){a.show(),n.update_cover({image_index:"1",fileName:o.message}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.input.avatar=o.message:s.autoHide(t.message)})}),e.get_images=function(e){return e?e.split("#"):[]},e.get_tags=function(e){return e?e.split("#"):[]},e.genders=["女","男"];for(var p=100,l=[],_=0;150>_;_++)l.push(p+"cm"),p++;e.heights=l,e.incomes=["5000元以下","5000-10000元","10000-20000元","20000-30000元","30000以上"],i.query_province().then(function(t){e.provinces=t.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(t){void 0!==t&&""!=t&&e.query_city(t)}),e.query_city=function(t){i.query_city().then(function(o){e.cities=o[t],e.input.city=e.cities[0]})},e.$watch("input.province_1",function(t){void 0!==t&&""!=t&&e.query_city_1(t)}),e.query_city_1=function(t){i.query_city().then(function(o){e.cities_1=o[t],e.input.city_1=e.cities[0]})},e.$watch("input.province_2",function(t){void 0!==t&&""!=t&&e.query_city_2(t)}),e.query_city_2=function(t){i.query_city().then(function(o){e.cities_2=o[t],e.input.city_2=e.cities[0]})},e.degrees=["初中","高中","中专","大专","本科","硕士","博士"],e.marrys=["未婚","已婚","离异","丧偶"],e.children=["没有","有，和我住一起","有，不和我住一起","有，有时和我住一起"],e.houses=["以后再告诉你","已购房(有房贷)","与父母同住","租房","已购房(无房贷)","住单位房","住亲朋家","需要时购置"],e.cars=["已购车","未购车","单位用车","需要时购置"];for(var g=18,d=[],_=0;83>_;_++)d.push(g+"岁"),g++;e.ages=d,e.input.height_1="",e.input.income_1="",e.input.province_1="",e.input.city_1="",e.input.degree_1="",e.input.child_1="",e.input.house_1="",e.input.province_2="",e.input.city_2="",e.nations=["汉","满族","藏族","回族","维吾尔族","苗族","壮族","朝鲜族","其他民族"],e.input.shuxing="",e.input.xinzuo="",e.bloods=["A型","B型","AB型","O型","其他"],e.bodys=["很瘦","较瘦","苗条","匀称","高挑","丰满","健壮","较胖","胖"];var h=40,m=[];m.push("40以下");for(var _=0;60>_;_+=2){var f=h+2;m.push(h+"-"+f+"公斤"),h=f}m.push("100公斤以上"),e.weights=m,e.scores=["1分","2分","3分","4分","5分","6分","7分","8分","9分","10分"],e.regions=["无神论","佛教","道教","基督教","天主教","儒教","犹太教","回教","伊斯兰教","其他"],e.smokes=["不吸，很反感","不吸，但不反感","社交时偶尔吸烟","烟不离手"],e.drinks=["不喝酒","社交需要喝","兴致时小酌","酒不离口"],e.input.school="",e.majors=["计算机类","电子信息类","中文类","经济学类","金融学类","管理类","市场营销类","法学类","教育类","社会学类","历史类","哲学类","艺术类","图书馆类","情报档案类","政治类","数学类","统计类","物理类","化学类","生物类","食品类","医学类","环境了类","地理类","建筑类","测绘类","电气类","机械类","其他"],e.positions=["计算机/互联网","电子电器/通讯技术","机械/仪表仪器","销售","客服及技术支持","财务/审计/税务","证券/金融/投资/银行","保险","生产/营运","质量/安全管理","工程/能源","贸易/采购","物流/仓储/运输","技工","化工/环保","生物/制药/医疗器械","广告","市场/公关","人力资源","行政/后勤","律师/法务/合规","科研","商业零售服务","其他"],e.company_natures=["政府机关","事业单位","外企企业","世界500强","上市公司","国有企业","私营企业","其他"],e.industries=["计算机/网络","科研/教育","公关/广告","传媒出版","营销/市场/策划","房地产/建筑业","装饰/装潢","其他"],e.work_statuses=["轻松稳定","朝九晚五","偶尔加班","经常加班","偶尔出差","经常出差","常有应酬","工作时间自由"],e.languages=["中文","英语","法语","日语","韩语","德语","意大利语","西班牙语","阿拉伯语","其他"],e.input.about_money,e.input.about_sex="",e.input.about_love="",e.input.marry_plan="",e.houseworks=["任劳任怨","希望对方承担家务","一起分工合作","看各自闲忙，协商分担"],e.babys=["想","不想","还没想好","视情况而定","其他"],e.live_with_parents=["愿意","不愿意","视情况而定"],e.input.couple="",e.input.alone_with="",e.input.yearing="",e.input.like_book="",e.input.like_film="",e.input.focus_topic="",e.input.proud="",e.cookings=["色香味俱全","能做几样可口的小菜","不太会，但愿为心爱的的人学","其他"],e.input.had_been="",e.input.work_place="",e.input.life_place="",e.input.offen_go="",e.input.company="",e.save=function(){a.show(),n.save_userinfo_1({sex:"男"==e.input.gender?"1":"0",birthday:e.input.options.value,province:e.input.province,city:e.input.city,height:e.input.height,edu:e.input.degree,marry:e.input.marry,is_has_child:e.input.child,buy_house:e.input.house,buy_car:e.input.car,job:e.input.job}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)}),n.save_userinfo_2({user_other_data_id:e.user.UserOther.user_other_data_id,dossier_hometown_province:e.input.province_2,dossier_hometown_city:e.input.city_2,dossier_nation:e.input.nation,dossier_shuxiang:e.input.shuxiang,dossier_xingzuo:e.input.xinzuo,dossier_xuexing:e.input.blood,dossier_tixing:e.input.body,dossier_tizhong:e.input.weight,dossier_xiangmao_zp:e.input.score,dossier_xiangmao_religion:e.input.region,dossier_smoke:e.input.smoke,dossier_drink:e.input.drink,edu_job_school:e.input.school,edu_job_profession:e.input.major,edu_job_zhiye_zhiwu:e.input.position,edu_job_nature_company:e.input.company_nature,edu_job_company_hangye:e.input.industry,edu_job_work_status:e.input.work_status,edu_job_master_language:e.input.language,attitude_money:e.input.about_money,attitude_sex:e.input.about_sex,attitude_shiye_love:e.input.about_love,love_marry_plan:e.input.marry_plan,love_home_work:e.input.housework,love_want_child:e.input.baby,love_want_fw_zhu:e.input.live_with_parent,love_spouse_pattern:e.input.couple,love_live_pattern:e.input.alone_with,life_xiangwang_thing:e.input.yearing,life_love_book:e.input.like_book,life_love_movie:e.input.like_film,life_love_music:e.input.like_music,life_guanzhu_theme:e.input.focus_topic,life_proud_thing:e.input.proud,life_cooking:e.input.cooking,life_go_space:e.input.had_been,life_circle_work_place:e.input.work_place,life_circle_life_place:e.input.life_place}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)}),n.save_userinfo_3({user_other_data_id:e.user.UserOther.user_other_data_id,choose_mate_age:e.input.age_1,choose_mate_heart:e.input.height_1,choose_mate_start_age:e.input.age_from,choose_mate_end_age:e.input.age_to,choose_mate_start_height:e.input.height_from,choose_mate_end_height:e.input.height_to,choose_mate_province:e.input.province_1,choose_mate_city:e.input.city_1,choose_mate_marry:e.input.marry,choose_mate_edu:e.input.degree_1,choose_mate_income:e.input.income_1,choose_mate_has_child:e.input.child_1,choose_mate_has_house:e.input.house_1}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)})},e.preview_image=function(t){e.preview_images=t,e.preview="preview"},e.close_preview=function(){e.preview=""},e.editing=0,e.edit=function(){e.editing=1}}]),angular.module("Love").controller("uploadCoversController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_cover_success",{message:i}),o.hide()})}]),angular.module("Love").controller("uploadAvatarController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_avatar_success",{message:i}),o.hide()})}]),angular.module("Love").controller("detailController",["$scope","$routeParams","$timeout","$location","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c){e.input={},a.show(),i.query_userinfo({type:"2",ta_user_id:t.id}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.user=t.Result.UserInfo,e.input.covers=e.user.image_other.split("#").filter(function(e){return""!=e}),e.input.avatar=e.user.image_01,e.input.heart=e.user.heart,e.input.gender=e.genders[e.user.sex],e.input.height=e.user.height,e.input.income=e.user.income,e.input.province=e.user.province,o(function(){e.input.city=e.user.city,e.input.city_1=e.user.UserOther.choose_mate_city,e.input.city_2=e.user.UserOther.dossier_hometown_city},2e3),e.input.degree=e.user.edu,e.input.marry=e.user.marry,e.input.child=e.user.is_has_child,e.input.is_buy_house=e.user.is_buy_house,e.input.house=e.user.buy_house,e.input.car=e.user.buy_car,e.input.is_buy_car=e.user.is_buy_car,e.input.job=e.user.job,e.input.age_1=(e.user.UserOther.choose_mate_start_age||"不限")+" - "+(e.user.UserOther.choose_mate_end_age||"不限"),e.input.height_1=(e.user.UserOther.choose_mate_start_height||"不限")+" - "+(e.user.UserOther.choose_mate_end_height||"不限"),e.input.income_1=e.user.UserOther.choose_mate_income,e.input.province_1=e.user.UserOther.choose_mate_province,e.input.degree_1=e.user.UserOther.choose_mate_edu,e.input.marry_1=e.user.UserOther.choose_mate_marry,e.input.child_1=e.user.UserOther.choose_mate_has_child,e.input.house_1=e.user.UserOther.choose_mate_has_house,e.input.car_1=e.user.UserOther.choose_mate_has_car,e.input.province_2=e.user.UserOther.dossier_hometown_province,e.input.nation=e.user.UserOther.dossier_nation,e.input.shuxiang=e.user.UserOther.dossier_shuxiang,e.input.xinzuo=e.user.UserOther.dossier_xingzuo,e.input.blood=e.user.UserOther.dossier_xuexing,e.input.body=e.user.UserOther.dossier_tixing,e.input.weight=e.user.UserOther.dossier_tizhong,e.input.score=e.user.UserOther.dossier_xiangmao_zp,e.input.region=e.user.UserOther.dossier_region,e.input.smoke=e.user.UserOther.dossier_smoke,e.input.drink=e.user.UserOther.dossier_drink,e.input.school=e.user.UserOther.edu_job_school,e.input.major=e.user.UserOther.edu_job_profession,e.input.position=e.user.UserOther.edu_job_zhiwu,e.input.company_nature=e.user.UserOther.edu_job_nature_company,e.input.work_status=e.user.UserOther.edu_job_work_status,e.input.language=e.user.UserOther.edu_job_master_language,e.input.about_money=e.user.UserOther.attitude_money,e.input.about_love=e.user.UserOther.attitude_shiye_love,e.input.about_sex=e.user.UserOther.attitude_sex,e.input.marry_plan=e.user.UserOther.love_marry_plan,e.input.housework=e.user.UserOther.love_home_work,e.input.babys=e.user.UserOther.love_want_child,e.input.live_with_parent=e.user.UserOther.love_want_fw_zhu,e.input.couple=e.user.UserOther.love_spouse_pattern,e.input.alone_with=e.user.UserOther.love_live_pattern,e.input.yearing=e.user.UserOther.life_xiangwang_thing,e.input.like_book=e.user.UserOther.life_love_book,e.input.like_film=e.user.UserOther.life_love_movie,e.input.focus_topic=e.user.UserOther.life_guanzhu_theme,e.input.proud=e.user.UserOther.life_proud_thing,e.input.cooking=e.user.UserOther.life_cooking,e.input.had_been=e.user.UserOther.life_go_space,e.input.work_place=e.user.UserOther.life_circle_work_place,e.input.life_place=e.user.UserOther.life_circle_life_place):s.autoHide(t.message)}),a.show(),i.query_report_info().then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.report_info=t.Result.Constant:s.autoHide(t.message)}),e.preview_image=function(t){e.preview_images=t,e.preview="preview"},e.close_preview=function(){e.preview=""},e.get_images=function(e){return e?e.split("#"):[]},e.get_tags=function(e){return e?e.split("#"):void 0},e.genders=["女","男"],e.like=function(){a.show(),i.like({ta_user_id:t.id}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)})},e.modal={status:0},e.open_modal=function(){a.show(),i.prepare_yue_ta({ta_user_id:t.id}).then(function(t){a.hide(),e.chat_status=t.status,t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?r.path("chat").search({id:e.user.user_id,status:e.user.chat_status}):(e.modal.status=1,s.autoHide(t.message))})},e.cancel_modal=function(){e.modal.status=0},e.deposit=function(){u.get("token")&&r.path("signin").replace(),e.modal.status=0,r.path("payment").search({id:t.id,money:e.report_info.bond_money,type:"meeting"})},e.vip=function(){u.get("token")&&r.path("signin").replace(),e.modal.status=0,r.path("charge").search({vip:0})}}]),angular.module("Love").controller("createAppointmentController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(t){e.step=t}}]),angular.module("Love").controller("chatController",["$scope","$route","$routeParams","$timeout","$rootScope","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c,p){e.input={block_status:o.status},e.chats=[],e.page={pn:1,page_size:500,message:"点击加载更多",receive_user_id:o.id},e.loadMore=function(){e.no_more||(u.show(),e.page.message="正在加载...",s.query_message_by_id(e.page).then(function(t){u.hide(),e.page.message="点击加载更多",t.code==p.request.SUCCESS&&t.status==p.response.SUCCESS?(e.chats=e.chats.concat(t.Result.ChatMessages.list),e.no_more=e.chats.length==t.Result.ChatMessages.totalRow?!0:!1,r(function(){$("html, body").animate({scrollTop:$(document).height()},100)},500)):a.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),s.query_basicinfo().then(function(t){t.code==p.request.SUCCESS&&t.status==p.response.SUCCESS?e.user=t.Result.BaseInfo:a.autoHide(t.message)}),e.send=function(){u.show(),s.send({receive_user_id:o.id,content:e.input.content}).then(function(t){u.hide(),t.code==p.request.SUCCESS&&t.status==p.response.SUCCESS?(e.chats.push({is_read:"",receive_nickname:"",current_image_01:e.user.image_01,receive_image_01:"4131734_110157044032_22.jpg",user_id:e.user.user_id,send_receive_time:"2016-02-29 13:51:00.0",chat_message_id:e.user.user_id,receive_user_id:o.id,content:e.input.content,post_time:"2016-02-29 13:51:00",current_nickname:"小明",is_me_send:"1"}),e.input.content="",$("html, body").animate({scrollTop:$(document).height()},100),$("input").blur()):a.autoHide(t.message)})},e.block={},e.show_model=function(){e.block.status=1},e.close_model=function(){e.block.status=""},e.block_model=function(e){u.show(),s.block({ta_user_id:o.id,black_type:e}).then(function(e){u.hide(),e.code==p.request.SUCCESS&&e.status==p.response.SUCCESS?(a.autoHide(e.message),n.back()):(a.autoHide(e.message),i.path("chat").search())})},e.clear_message=function(){u.show(),s.clear_message({receive_user_id:o.id}).then(function(e){u.hide(),e.code==p.request.SUCCESS&&e.status==p.response.SUCCESS?(a.autoHide(e.message),r(function(){t.reload()},1e3)):(a.autoHide(e.message),i.path("chat").search())})},$("input").focus(function(){var e=$(this);$("html, body").animate({scrollTop:$(document).height()},100),r(function(){e.parents(".respond-wrap").css({position:"absolute",top:$(document).height()-53,bottom:"auto"})},100)}),$("input").blur(function(){var e=$(this);$("html, body").animate({scrollTop:$(document).height()},100),r(function(){e.parents(".respond-wrap").css({position:"fixed",top:"auto",bottom:"0"})},100)})}]),angular.module("Love").controller("chargeController",["$scope","$routeParams","userServices","$location","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u){e.is_vip=t.vip,s.show(),n.query_vips().then(function(t){s.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.vips=t.Result.VipPrices,e.input.vip=e.vips[0]):i.autoHide(t.message)}),e.confirm=function(){var o="charge";return"1"==t.vip?(i.autoHide("您已经是VIP，无需再充值"),void 0):("0"==t.vip&&(o="vip"),r.path("payment").search({id:e.input.vip.vip_price_id,money:e.input.vip.price,type:o}),void 0)},e.step=1,e.input={},e.show_step=function(t){e.step=t},e.change_vips=function(t){e.input.vip=t}}]),angular.module("Love").controller("basicController",["$scope","$route","$filter","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a,u,c){e.input={},a.show(),n.query_userinfo({type:"1"}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.user=t.Result.UserInfo,e.input.birthday=e.user.birthday?e.user.birthday:o("date")(new Date,"yyyy-MM-dd"),e.input.covers=e.user.image_other.split("#").filter(function(e){return""!=e}),e.input.avatar=e.user.image_01,e.input.heart=e.user.heart,e.input.nickname=e.user.nickname,e.input.gender=e.genders[e.user.sex],e.input.height=e.user.height,e.input.income=e.user.income,e.input.province=e.user.province,r(function(){e.input.city=e.user.city,e.input.city_1=e.user.UserOther.choose_mate_city,e.input.city_2=e.user.UserOther.dossier_hometown_city},2e3),e.input.degree=e.user.edu,e.input.marry=e.user.marry,e.input.child=e.user.is_has_child,e.input.is_buy_house=e.user.is_buy_house,e.input.house=e.user.buy_house,e.input.car=e.user.buy_car,e.input.is_buy_car=e.user.is_buy_car,e.input.job=e.user.job,e.input.age_1=(e.user.UserOther.choose_mate_start_age||"不限")+" - "+(e.user.UserOther.choose_mate_end_age||"不限"),e.input.height_1=(e.user.UserOther.choose_mate_start_height||"不限")+" - "+(e.user.UserOther.choose_mate_end_height||"不限"),e.input.income_1=e.user.UserOther.choose_mate_income,e.input.province_1=e.user.UserOther.choose_mate_province,e.input.degree_1=e.user.UserOther.choose_mate_edu,e.input.marry_1=e.user.UserOther.choose_mate_marry,e.input.child_1=e.user.UserOther.choose_mate_has_child,e.input.house_1=e.user.UserOther.choose_mate_has_house,e.input.car_1=e.user.UserOther.choose_mate_has_car,e.input.province_2=e.user.UserOther.dossier_hometown_province,e.input.nation=e.user.UserOther.dossier_nation,e.input.shuxiang=e.user.UserOther.dossier_shuxiang,e.input.xinzuo=e.user.UserOther.dossier_xingzuo,e.input.blood=e.user.UserOther.dossier_xuexing,e.input.body=e.user.UserOther.dossier_tixing,e.input.weight=e.user.UserOther.dossier_tizhong,e.input.score=e.user.UserOther.dossier_xiangmao_zp,e.input.region=e.user.UserOther.dossier_xiangmao_religion,e.input.smoke=e.user.UserOther.dossier_smoke,e.input.drink=e.user.UserOther.dossier_drink,e.input.school=e.user.UserOther.edu_job_school,e.input.major=e.user.UserOther.edu_job_profession,e.input.position=e.user.UserOther.edu_job_zhiye_zhiwu,e.input.company_nature=e.user.UserOther.edu_job_nature_company,e.input.industry=e.user.UserOther.edu_job_company_hangye,e.input.work_status=e.user.UserOther.edu_job_work_status,e.input.language=e.user.UserOther.edu_job_master_language,e.input.about_money=e.user.UserOther.attitude_money,e.input.about_love=e.user.UserOther.attitude_shiye_love,e.input.about_sex=e.user.UserOther.attitude_sex,e.input.marry_plan=e.user.UserOther.love_marry_plan,e.input.housework=e.user.UserOther.love_home_work,e.input.baby=e.user.UserOther.love_want_child,e.input.live_with_parent=e.user.UserOther.love_want_fw_zhu,e.input.couple=e.user.UserOther.love_spouse_pattern,e.input.alone_with=e.user.UserOther.love_live_pattern,e.input.yearing=e.user.UserOther.life_xiangwang_thing,e.input.like_book=e.user.UserOther.life_love_book,e.input.like_film=e.user.UserOther.life_love_movie,e.input.like_music=e.user.UserOther.life_love_music,e.input.focus_topic=e.user.UserOther.life_guanzhu_theme,e.input.proud=e.user.UserOther.life_proud_thing,e.input.cooking=e.user.UserOther.life_cooking,e.input.had_been=e.user.UserOther.life_go_space,e.input.work_place=e.user.UserOther.life_circle_work_place,e.input.life_place=e.user.UserOther.life_circle_life_place):s.autoHide(t.message)}),e.input.covers=[],e.$on("upload_cover_success",function(t,o){a.show(),n.update_cover({image_index:"2",fileName:o.message}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.input.covers.push(o.message):s.autoHide(t.message)})}),e.remove_cover=function(t){a.show(),n.remove_cover({oleFileName:t}).then(function(o){a.hide(),o.code==c.request.SUCCESS&&o.status==c.response.SUCCESS?e.input.covers=e.input.covers.filter(function(e){return t!=e}):s.autoHide(o.message)})},e.$on("upload_avatar_success",function(t,o){a.show(),n.update_cover({image_index:"1",fileName:o.message}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.input.avatar=o.message:s.autoHide(t.message)})}),e.get_images=function(e){return e?e.split("#"):[]},e.get_tags=function(e){return e?e.split("#"):[]},e.genders=["女","男"];for(var p=100,l=[],_=0;150>_;_++)l.push(p+"cm"),p++;e.heights=l,e.incomes=["5000元以下","5000-10000元","10000-20000元","20000-30000元","30000以上"],i.query_province().then(function(t){e.provinces=t.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(t){void 0!==t&&""!=t&&e.query_city(t)}),e.query_city=function(t){i.query_city().then(function(o){e.cities=o[t],e.input.city=e.cities[0]})},e.$watch("input.province_1",function(t){void 0!==t&&""!=t&&e.query_city_1(t)}),e.query_city_1=function(t){i.query_city().then(function(o){e.cities_1=o[t],e.input.city_1=e.cities[0]})},e.$watch("input.province_2",function(t){void 0!==t&&""!=t&&e.query_city_2(t)}),e.query_city_2=function(t){i.query_city().then(function(o){e.cities_2=o[t],e.input.city_2=e.cities[0]})},e.degrees=["初中以上","高中以上","中专以上","大专以上","本科以上","硕士以上","博士以上"],e.marrys=["未婚","已婚","离异","丧偶"],e.children=["没有","有，和我住一起","有，不和我住一起","有，有时和我住一起"],e.houses=["以后再告诉你","已购房(有房贷)","与父母同住","租房","已购房(无房贷)","住单位房","住亲朋家","需要时购置"],e.cars=["已购车","未购车","单位用车","需要时购置"];for(var g=18,d=[],_=0;83>_;_++)d.push(g+"岁"),g++;e.ages=d,e.input.height_1="",e.input.income_1="",e.input.province_1="",e.input.city_1="",e.input.degree_1="",e.input.child_1="",e.input.house_1="",e.input.province_2="",e.input.city_2="",e.nations=["汉","满族","藏族","回族","维吾尔族","苗族","壮族","朝鲜族","其他民族"],e.input.shuxing="",e.input.xinzuo="",e.bloods=["A型","B型","AB型","O型","其他"],e.bodys=["很瘦","较瘦","苗条","匀称","高挑","丰满","健壮","较胖","胖"];var h=40,m=[];m.push("40以下");for(var _=0;60>_;_+=2){var f=h+2;m.push(h+"-"+f+"公斤"),h=f}m.push("100公斤以上"),e.weights=m,e.scores=["1","2","3","4","5","6","7","8","9","10"],e.regions=["无神论","佛教","道教","基督教","天主教","儒教","犹太教","回教","伊斯兰教","其他"],e.smokes=["不吸，很反感","不吸，但不反感","社交时偶尔吸烟","烟不离手"],e.drinks=["不喝酒","社交需要喝","兴致时小酌","酒不离口"],e.input.school="",e.majors=["计算机类","电子信息类","中文类","经济学类","金融学类","管理类","市场营销类","法学类","教育类","社会学类","历史类","哲学类","艺术类","图书馆类","情报档案类","政治类","数学类","统计类","物理类","化学类","生物类","食品类","医学类","环境了类","地理类","建筑类","测绘类","电气类","机械类","其他"],e.positions=["计算机/互联网","电子电器/通讯技术","机械/仪表仪器","销售","客服及技术支持","财务/审计/税务","证券/金融/投资/银行","保险","生产/营运","质量/安全管理","工程/能源","贸易/采购","物流/仓储/运输","技工","化工/环保","生物/制药/医疗器械","广告","市场/公关","人力资源","行政/后勤","律师/法务/合规","科研","商业零售服务","其他"],e.company_natures=["政府机关","事业单位","外企企业","世界500强","上市公司","国有企业","私营企业","其他"],e.industries=["计算机/网络","科研/教育","公关/广告","传媒出版","营销/市场/策划","房地产/建筑业","装饰/装潢","其他"],e.work_statuses=["轻松稳定","朝九晚五","偶尔加班","经常加班","偶尔出差","经常出差","常有应酬","工作时间自由"],e.languages=["中文","英语","法语","日语","韩语","德语","意大利语","西班牙语","阿拉伯语","其他"],e.input.about_money,e.input.about_sex="",e.input.about_love="",e.input.marry_plan="",e.houseworks=["任劳任怨","希望对方承担家务","一起分工合作","看各自闲忙，协商分担"],e.babys=["想","不想","还没想好","视情况而定","其他"],e.live_with_parents=["愿意","不愿意","视情况而定"],e.input.couple="",e.input.alone_with="",e.input.yearing="",e.input.like_book="",e.input.like_film="",e.input.focus_topic="",e.input.proud="",e.cookings=["色香味俱全","能做几样可口的小菜","不太会，但愿为心爱的的人学","其他"],e.input.had_been="",e.input.work_place="",e.input.life_place="",e.input.offen_go="",e.input.company="",e.save=function(){t.reload(),a.show(),n.save_userinfo_1({sex:"男"==e.input.gender?"1":"0",birthday:o("date")(e.input.birthday,"yyyy-MM-dd"),province:e.input.province,city:e.input.city,height:e.input.height,edu:e.input.degree,marry:e.input.marry,is_has_child:e.input.child,buy_house:e.input.house,buy_car:e.input.car,job:e.input.job}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)}),n.save_userinfo_2({user_other_data_id:e.user.UserOther.user_other_data_id,dossier_hometown_province:e.input.province_2,dossier_hometown_city:e.input.city_2,dossier_nation:e.input.nation,dossier_shuxiang:e.input.shuxiang,dossier_xingzuo:e.input.xinzuo,dossier_xuexing:e.input.blood,dossier_tixing:e.input.body,dossier_tizhong:e.input.weight,dossier_xiangmao_zp:e.input.score,dossier_xiangmao_religion:e.input.region,dossier_smoke:e.input.smoke,dossier_drink:e.input.drink,edu_job_school:e.input.school,edu_job_profession:e.input.major,edu_job_zhiye_zhiwu:e.input.position,edu_job_nature_company:e.input.company_nature,edu_job_company_hangye:e.input.industry,edu_job_work_status:e.input.work_status,edu_job_master_language:e.input.language,attitude_money:e.input.about_money,attitude_sex:e.input.about_sex,attitude_shiye_love:e.input.about_love,love_marry_plan:e.input.marry_plan,love_home_work:e.input.housework,love_want_child:e.input.baby,love_want_fw_zhu:e.input.live_with_parent,love_spouse_pattern:e.input.couple,love_live_pattern:e.input.alone_with,life_xiangwang_thing:e.input.yearing,life_love_book:e.input.like_book,life_love_movie:e.input.like_film,life_love_music:e.input.like_music,life_guanzhu_theme:e.input.focus_topic,life_proud_thing:e.input.proud,life_cooking:e.input.cooking,life_go_space:e.input.had_been,life_circle_work_place:e.input.work_place,life_circle_life_place:e.input.life_place}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)
}),n.save_userinfo_3({user_other_data_id:e.user.UserOther.user_other_data_id,choose_mate_age:e.input.age_1,choose_mate_heart:e.input.height_1,choose_mate_province:e.input.province_1,choose_mate_city:e.input.city_1,choose_mate_marry:e.input.marry,choose_mate_edu:e.input.degree_1,choose_mate_income:e.input.income_1,choose_mate_has_child:e.input.child_1,choose_mate_has_house:e.input.house_1}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)})},e.preview_image=function(t){e.preview_images=t,e.preview="preview"},e.close_preview=function(){e.preview=""}}]),angular.module("Love").controller("uploadCoversController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_cover_success",{message:i}),o.hide()})}]),angular.module("Love").controller("uploadAvatarController",["$scope","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n){var i,s;e.$on("flow::filesSubmitted",function(e,t){t.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return s=e,e}),i=(new Date).getTime()+s,t.opts.target=n.url+"/app/UserCenter/updatePic",t.opts.testChunks=!1,t.opts.fileParameterName="image_01",t.opts.query={invoke:"h5",token:r.get("token"),filename:i},o.show(),t.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_avatar_success",{message:i}),o.hide()})}]),angular.module("Love").controller("authenController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){r.show(),t.query_userinfo({type:"1"}).then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.user=t.Result.UserInfo:o.autoHide(t.message)})}]),angular.module("Love").controller("appointmentController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){t.query_basicinfo().then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.user=t.Result.BaseInfo:o.autoHide(t.message)})}]),angular.module("Love").controller("appointment2SureController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){e.meettings=[],e.page={pn:1,page_size:5,message:"点击加载更多",yuehui_type:"2"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",t.query_meetting(e.page).then(function(t){r.hide(),e.page.message="点击加载更多",t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.meettings=e.meettings.concat(t.Result.Trysts.list),e.no_more=e.meettings.length==t.Result.Trysts.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.meettings.length+"条记录"),e.page.pn++}))},e.loadMore(),r.show(),t.query_report_info().then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.report_info=t.Result.Constant:o.autoHide(t.message)}),e.modal={status:0},e.complaint="请联系官方客服，进行投诉维权",e.open_modal=function(t){e.report_meetting=t,e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){r.show(),t.report({tryst_id:e.report_meetting.tryst_id,complainted_user_id:e.report_meetting.trysted_user_id}).then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.modal.status=0,e.report_meetting="",o.autoHide(t.message)):o.autoHide(t.message)})}}]),angular.module("Love").controller("appointment2RefuseController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i){e.meettings=[],e.modalshow={},e.page={pn:1,page_size:5,message:"点击加载更多",yuehui_type:"3"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",t.query_meetting(e.page).then(function(t){r.hide(),e.page.message="点击加载更多",t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.meettings=e.meettings.concat(t.Result.Trysts.list),e.no_more=e.meettings.length==t.Result.Trysts.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.meettings.length+"条记录"),e.page.pn++}))},e.loadMore(),r.show(),t.query_report_info().then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.report_info=t.Result.Constant:o.autoHide(t.message)}),e.modal={status:0},e.complaint="请联系官方客服，进行投诉维权",e.open_modal=function(t){e.report_meetting=t,e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){r.show(),t.report({tryst_id:e.report_meetting.tryst_id,complainted_user_id:e.report_meetting.trysted_user_id}).then(function(t){r.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?(e.modal.status=0,e.report_meetting="",o.autoHide(t.message)):o.autoHide(t.message)})},e.go=function(t){"1"==e.user.is_vip?$location.path("chat").search({id:t}):e.modal.status=1}}]),angular.module("Love").controller("appointment2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1SureController",["$scope","$location","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,o,r,n,i,s,a){e.meettings=[],e.page={pn:1,page_size:5,message:"点击加载更多",yuehui_type:"1"},e.loadMore=function(){e.no_more||(i.show(),e.page.message="正在加载...",r.query_meetting(e.page).then(function(t){i.hide(),e.page.message="点击加载更多",t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?(e.meettings=e.meettings.concat(t.Result.Trysts.list),e.no_more=e.meettings.length==t.Result.Trysts.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.meettings.length+"条记录"),e.page.pn++}))},e.loadMore(),i.show(),r.query_report_info().then(function(t){i.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?e.report_info=t.Result.Constant:n.autoHide(t.message)}),e.modal={status:0},e.complaint="请联系官方客服，进行投诉维权",e.open_modal=function(t,o){e.report_meetting=t,e.report_meetting_type=o,e.modal.status=1,"agree"==e.report_meetting_type&&(e.meetting_title="同意约会"),"reject"==e.report_meetting_type&&(e.meetting_title="拒绝约会")},e.reject=function(){i.show(),r.reject_meetting({tryst_id:e.report_meetting.tryst_id}).then(function(t){i.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?(e.modal.status=0,e.report_meetting="",n.autoHide(t.message)):n.autoHide(t.message)})},e.agree=function(){o.prepare_pay({redirect_uri:a.url+"/app/WeixinPayController/payAgreeTryst",token:s.get("token"),tryst_id:e.report_meetting.tryst_id})},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){"agree"==e.report_meetting_type&&(e.meetting_title="同意约会",e.agree()),"reject"==e.report_meetting_type&&(e.meetting_title="拒绝约会",e.reject())}}]),angular.module("Love").controller("appointment1RefuseController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("accountController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").constant("config",{url:"http://www.henduoniu.com",imageUrl:"http://www.henduoniu.com/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5",app_sign:"123456"},weixin:{base_url:"https://open.weixin.qq.com/connect/oauth2/authorize",access_token_url:"https://api.weixin.qq.com/sns/oauth2/access_token",userinfo_url:"https://api.weixin.qq.com/sns/userinfo",appid:"wx24cc097bb3db1ce3",secret:"b029f342a2e50a9a081a3d450424e71f",redirect_uri:"http://www.henduoniu.com/oauth",response_type:"code",silence_scope:"snsapi_base",scope:"snsapi_userinfo",state:"weixin",wechat_redirect:"#wechat_redirect"},share:{},interceptor:["account","appointment","appointment1","appointment2","authen","basic","edit_basic","chat","create_appointment","index","lovers","manual_authen","mating","member","member1","member2","messages","message","mylove","phone_authen","realname_authen","payment","search","services","signin","signup","single","search_conditional","send_messages","appointment1_refuse","appointment1_sure","appointment2_refuse","appointment2_sure","detail","privacy","charge","me","ta","tags","withdrawals","recommendation","visitors","show"]});
//# sourceMappingURL=app.min.js.map
